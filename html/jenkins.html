<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jenkins Mastery: CI/CD & Security - VENKATESAN SM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3a8a;
            --accent: #3b82f6;
            --bg-light: #f8fafc;
            --code-bg: #0f172a;
            --border: #e2e8f0;
            --text-main: #1e293b;
            --text-muted: #64748b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            color: var(--text-main);
            line-height: 1.6;
            padding: 40px 20px;
        }

        .container { max-width: 1000px; margin: 0 auto; }

        /* Header */
        .module-header {
            border-bottom: 2px solid var(--border);
            margin-bottom: 40px;
            padding-bottom: 20px;
        }
        .breadcrumb { font-size: 0.85rem; color: var(--accent); font-weight: 600; text-transform: uppercase; margin-bottom: 10px; }
        h1 { font-size: 2.5rem; color: var(--primary); font-weight: 800; }

        h2 { font-size: 1.8rem; color: var(--primary); margin: 50px 0 20px; border-left: 5px solid var(--accent); padding-left: 15px; }
        h3 { font-size: 1.3rem; color: var(--primary); margin: 30px 0 15px; font-weight: 600; }

        /* Technical Blocks */
        .technical-block {
            background: var(--code-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .block-label { color: #94a3b8; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; margin-bottom: 15px; display: block; }
        
        pre {
            font-family: 'Fira Code', monospace;
            font-size: 0.88rem;
            color: #e2e8f0;
            overflow-x: auto;
            white-space: pre;
        }
        .comment { color: #64748b; font-style: italic; }
        .keyword { color: #f472b6; font-weight: 700; }
        .string { color: #fbbf24; }
        .function { color: #38bdf8; }

        /* UI Cards */
        .concept-card {
            background: var(--bg-light);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 30px;
        }
        .concept-card h4 { color: var(--primary); margin-bottom: 10px; }

        .note {
            background: #eff6ff;
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            margin: 30px 0;
        }

        .link-box {
            display: inline-block;
            background: #f1f5f9;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            color: var(--primary);
            font-weight: 600;
            margin-top: 10px;
            border: 1px solid var(--border);
        }
        .link-box:hover { background: var(--accent); color: white; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px; }
    </style>
</head>
<body>

    <div class="container">
        <header class="module-header">
            <div class="breadcrumb">Automation & Orchestration</div>
            <h1>Jenkins CI/CD Pipelines</h1>
            <p style="margin-top: 10px; color: var(--text-muted);">Industrial-strength integration, deployment, and credential management.</p>
        </header>

        <section class="concept-card">
            <h4>Jenkins Overview</h4>
            <p>Jenkins is the industry standard for <b>Continuous Integration (CI)</b> and <b>Continuous Deployment (CD)</b>. It serves as the hub that integrates your source code (GitHub/GitLab) with your compute environment (Kubernetes/Cloud Providers).</p>
            <a href="https://www.jenkins.io/doc/book/installing/" class="link-box" target="_blank">ðŸ”— Official Installation Guide</a>
        </section>

        <h2>1. Working with Credentials (Secrets)</h2>
        <p>Managing tokens, passwords, and SSH keys securely is critical for a secure pipeline.</p>

        <div class="technical-block">
            <span class="block-label">Declarative: Secret Text (GitHub PAT)</span>
            <pre>
<span class="keyword">pipeline</span> {
    <span class="keyword">agent</span> any
    <span class="keyword">environment</span> {
        <span class="comment">// Binds the Jenkins Credential ID to a variable</span>
        GITHUB_PAT = <span class="function">credentials</span>(<span class="string">'GITHUB_PAT_ID'</span>)
        GITHUB_USER = <span class="string">'your-github-username'</span>
    }
    <span class="keyword">stages</span> {
        <span class="keyword">stage</span>(<span class="string">'Login and Push'</span>) {
            <span class="keyword">steps</span> {
                <span class="keyword">sh</span> <span class="string">'''
                    echo $GITHUB_PAT | docker login ghcr.io -u $GITHUB_USER --password-stdin
                    docker build -t ghcr.io/$GITHUB_USER/repo:latest .
                    docker push ghcr.io/$GITHUB_USER/repo:latest
                '''</span>
            }
        }
    }
}</pre>
        </div>

        <div class="technical-block">
            <span class="block-label">Declarative: Username & Password</span>
            <pre>
<span class="keyword">environment</span> {
    <span class="comment">// Jenkins automatically exports ID_USR and ID_PSW vars</span>
    DOCKER_CREDS = <span class="function">credentials</span>(<span class="string">'DOCKER_CRED_ID'</span>)
}
<span class="keyword">steps</span> {
    <span class="keyword">sh</span> <span class="string">'echo $DOCKER_CREDS_PSW | docker login -u $DOCKER_CREDS_USR --password-stdin'</span>
}</pre>
        </div>

        <div class="technical-block">
            <span class="block-label">Declarative: SSH Key Usage</span>
            <pre>
<span class="keyword">stage</span>(<span class="string">'Clone with SSH'</span>) {
    <span class="keyword">steps</span> {
        <span class="function">sshagent</span>([<span class="string">'MY_SSH_KEY_ID'</span>]) {
            <span class="keyword">sh</span> <span class="string">'git clone git@github.com:username/private-repo.git'</span>
        }
    }
}</pre>
        </div>

        <h3>Scripted Pipeline Examples</h3>
        <div class="grid">
            <div class="technical-block" style="margin-bottom: 0;">
                <span class="block-label">Secret Text (Scripted)</span>
                <pre>
<span class="keyword">node</span> {
    <span class="function">withCredentials</span>([<span class="function">string</span>(credentialsId: <span class="string">'PAT_ID'</span>, variable: <span class="string">'PAT'</span>)]) {
        <span class="keyword">sh</span> <span class="string">'echo $PAT | docker login...'</span>
    }
}</pre>
            </div>
            <div class="technical-block" style="margin-bottom: 0;">
                <span class="block-label">User/Pass (Scripted)</span>
                <pre>
<span class="function">withCredentials</span>([<span class="function">usernamePassword</span>(
    credentialsId: <span class="string">'ID'</span>, 
    usernameVariable: <span class="string">'USER'</span>, 
    passwordVariable: <span class="string">'PASS'</span>)]) {
    <span class="keyword">sh</span> <span class="string">'echo Login for $USER'</span>
}</pre>
            </div>
        </div>

        <h2>2. Dynamic Pipelines: Parameters & Environment</h2>
        <p>Enabling user input to control deployment environments and behavior.</p>

        <div class="technical-block">
            <span class="block-label">Advanced Declarative Pipeline</span>
            <pre>
<span class="keyword">pipeline</span> {
    <span class="keyword">agent</span> any

    <span class="keyword">parameters</span> {
        <span class="function">string</span>(name: <span class="string">'APP_NAME'</span>, defaultValue: <span class="string">'demo-app'</span>, description: <span class="string">'App name'</span>)
        <span class="function">choice</span>(name: <span class="string">'ENVIRONMENT'</span>, choices: [<span class="string">'dev'</span>, <span class="string">'qa'</span>, <span class="string">'prod'</span>], description: <span class="string">'Env'</span>)
        <span class="function">booleanParam</span>(name: <span class="string">'DEBUG_MODE'</span>, defaultValue: <span class="keyword">false</span>)
        <span class="function">password</span>(name: <span class="string">'ADMIN_PASSWORD'</span>, defaultValue: <span class="string">''</span>)
        <span class="function">file</span>(name: <span class="string">'CONFIG_UPLOAD'</span>)
    }

    <span class="keyword">environment</span> {
        ORG_NAME = <span class="string">'DemoOrg'</span>
        SELECTED_ENV = <span class="string">"${params.ENVIRONMENT}"</span>
        BUILD_REF = <span class="string">"${env.JOB_NAME}-#${env.BUILD_NUMBER}"</span>
        <span class="comment">// Computation based on parameter</span>
        DEBUG_FLAG = <span class="string">"${params.DEBUG_MODE ? '--debug' : ''}"</span>
    }

    <span class="keyword">stages</span> {
        <span class="keyword">stage</span>(<span class="string">'Show Inputs'</span>) {
            <span class="keyword">steps</span> {
                <span class="keyword">echo</span> <span class="string">"Env: ${params.ENVIRONMENT}"</span>
                <span class="keyword">echo</span> <span class="string">"Org: ${env.ORG_NAME}"</span>
            }
        }
        <span class="keyword">stage</span>(<span class="string">'Conditional Deploy'</span>) {
            <span class="keyword">when</span> { <span class="keyword">expression</span> { params.ENVIRONMENT == <span class="string">'prod'</span> } }
            <span class="keyword">steps</span> {
                <span class="keyword">echo</span> <span class="string">"Deploying ${params.APP_NAME} to production..."</span>
            }
        }
    }
    <span class="keyword">post</span> {
        <span class="keyword">always</span> { <span class="keyword">echo</span> <span class="string">'Pipeline complete!'</span> }
    }
}</pre>
        </div>

        <h2>3. Jenkins Best Practices</h2>
        <div class="grid">
            <div class="concept-card">
                <h4>Pipeline as Code</h4>
                <p>Always use a <code>Jenkinsfile</code> stored in your Git repository instead of configuring jobs manually in the UI. This allows for versioning and easy recovery.</p>
            </div>
            <div class="concept-card">
                <h4>Credential Masking</h4>
                <p>Jenkins automatically masks secrets in logs (e.g., <code>****</code>). Never manually <code>echo</code> a secret variable, as it might bypass masking in certain shell environments.</p>
            </div>
            <div class="concept-card">
                <h4>Agent Scaling</h4>
                <p>Use Kubernetes pods or Docker containers as Jenkins agents (<code>agent { kubernetes { ... } }</code>) to ensure clean build environments and elastic scaling.</p>
            </div>
            <div class="concept-card">
                <h4>Stage Visualization</h4>
                <p>Use logical stages (Build, Test, Deploy) so that the Pipeline Dashboard can clearly show where a failure occurred.</p>
            </div>
        </div>

        <div class="note">
            <strong>Security Alert:</strong> When using <code>credentials()</code>, Jenkins protects the values. However, using <code>sh "echo ${SECRET}"</code> (double quotes) is dangerous as it expands the secret in the shell before execution. Always use single quotes <code>sh 'echo $SECRET'</code> when possible to let the environment handle the variable.
        </div>
    </div>

</body>
</html>