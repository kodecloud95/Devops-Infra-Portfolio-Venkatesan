<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terraform Mastery: Infrastructure as Code - VENKATESAN SM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3a8a;
            --accent: #6366f1; /* Terraform Purple-ish Blue */
            --bg-light: #f8fafc;
            --code-bg: #0f172a;
            --border: #e2e8f0;
            --text-main: #1e293b;
            --text-muted: #64748b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            color: var(--text-main);
            line-height: 1.6;
            padding: 40px 20px;
        }

        .container { max-width: 1000px; margin: 0 auto; }

        /* Header */
        .module-header {
            border-bottom: 2px solid var(--border);
            margin-bottom: 40px;
            padding-bottom: 20px;
        }
        .breadcrumb { font-size: 0.85rem; color: var(--accent); font-weight: 600; text-transform: uppercase; margin-bottom: 10px; }
        h1 { font-size: 2.5rem; color: var(--primary); font-weight: 800; }

        h2 { font-size: 1.8rem; color: var(--primary); margin: 50px 0 20px; border-left: 5px solid var(--accent); padding-left: 15px; }
        h3 { font-size: 1.3rem; color: var(--primary); margin: 30px 0 15px; font-weight: 600; }

        /* Technical Blocks */
        .technical-block {
            background: var(--code-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .block-label { color: #94a3b8; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; margin-bottom: 15px; display: block; }
        
        pre {
            font-family: 'Fira Code', monospace;
            font-size: 0.88rem;
            color: #e2e8f0;
            overflow-x: auto;
            white-space: pre;
        }
        .comment { color: #64748b; font-style: italic; }
        .keyword { color: #818cf8; font-weight: 700; }
        .string { color: #fbbf24; }
        .attr { color: #38bdf8; }

        /* UI Components */
        .concept-card {
            background: var(--bg-light);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 30px;
        }
        .concept-card h4 { color: var(--primary); margin-bottom: 10px; }

        .note {
            background: #f5f3ff;
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            margin: 30px 0;
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px; }
        
        .stage-box {
            text-align: center;
            padding: 20px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
        }
        .stage-box h5 { color: var(--accent); font-size: 1.1rem; margin-bottom: 10px; }

        ul.list-detailed { margin-left: 20px; margin-bottom: 20px; }
        ul.list-detailed li { margin-bottom: 8px; }
    </style>
</head>
<body>

    <div class="container">
        <header class="module-header">
            <div class="breadcrumb">Infrastructure as Code (IaC)</div>
            <h1>Terraform Core Fundamentals</h1>
            <p style="margin-top: 10px; color: var(--text-muted);">Declarative infrastructure management for multi-cloud environments.</p>
        </header>

        <h2>1. The Three Stages of Terraform</h2>
        <p>Terraform operates in a distinct lifecycle to ensure predictable infrastructure changes.</p>
        <div class="grid">
            <div class="stage-box">
                <h5>1. Terraform Init</h5>
                <p style="font-size: 0.9rem;">Identifies providers, downloads plugins, and initializes the <code>.terraform</code> folder containing libraries.</p>
            </div>
            <div class="stage-box">
                <h5>2. Terraform Plan</h5>
                <p style="font-size: 0.9rem;">Performs a <strong>Dry Run</strong>. Displays the execution plan (changes to be made) without modifying real resources.</p>
            </div>
            <div class="stage-box">
                <h5>3. Terraform Apply</h5>
                <p style="font-size: 0.9rem;">Executes the changes and generates/updates the <code>terraform.tfstate</code> file to track infrastructure.</p>
            </div>
        </div>

        <h2>2. Project Structure & Basic Files</h2>
        <p>A well-organized Terraform project uses specific files to separate logic, variables, and outputs.</p>
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 30px; border: 1px solid var(--border);">
            <thead style="background: var(--bg-light);">
                <tr>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border);">File Name</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border);">Purpose</th>
                </tr>
            </thead>
            <tbody>
                <tr><td style="padding: 12px; border-bottom: 1px solid var(--border);"><code>version.tf</code></td><td style="padding: 12px; border-bottom: 1px solid var(--border);">Defines required Terraform version and provider versions.</td></tr>
                <tr><td style="padding: 12px; border-bottom: 1px solid var(--border);"><code>main.tf</code></td><td style="padding: 12px; border-bottom: 1px solid var(--border);">The primary file containing resource definitions.</td></tr>
                <tr><td style="padding: 12px; border-bottom: 1px solid var(--border);"><code>variable.tf</code></td><td style="padding: 12px; border-bottom: 1px solid var(--border);">Declaration of variables and their types.</td></tr>
                <tr><td style="padding: 12px; border-bottom: 1px solid var(--border);"><code>terraform.tfvars</code></td><td style="padding: 12px; border-bottom: 1px solid var(--border);">Default values for variables (Environment-specific).</td></tr>
                <tr><td style="padding: 12px; border-bottom: 1px solid var(--border);"><code>output.tf</code></td><td style="padding: 12px; border-bottom: 1px solid var(--border);">Specifies data to be displayed after deployment (e.g., IP addresses).</td></tr>
            </tbody>
        </table>

        <h2>3. Syntax & Deployment Examples</h2>
        <p>Terraform uses HCL (HashiCorp Configuration Language). Every resource requires a <strong>Type</strong> and a <strong>Name</strong>.</p>
        
        <div class="technical-block">
            <span class="block-label">General Resource Syntax</span>
            <pre>
<span class="keyword">resource</span> <span class="string">"resource_type"</span> <span class="string">"internal_resource_name"</span> {
    <span class="attr">attribute</span> = <span class="string">"value"</span>
}</pre>
        </div>

        <div class="technical-block">
            <span class="block-label">Example: Local File and Output Mapping</span>
            <pre>
<span class="comment">// Resource Definition</span>
<span class="keyword">resource</span> <span class="string">"local_file"</span> <span class="string">"webapp"</span> {
    <span class="attr">filename</span> = <span class="string">"/root/test/test.txt"</span>
    <span class="attr">content</span>  = <span class="string">"This is sample content"</span>
}

<span class="comment">// Output Definition</span>
<span class="keyword">output</span> <span class="string">"file_id"</span> {
    <span class="attr">value</span> = local_file.webapp.id
}</pre>
        </div>

        <h2>4. Azure Provider Configuration</h2>
        <p>When starting a project, always version your providers to ensure build stability.</p>
        
        <div class="technical-block">
            <span class="block-label">version.tf & Provider Setup</span>
            <pre>
<span class="keyword">terraform</span> {
  <span class="keyword">required_providers</span> {
    <span class="attr">azurerm</span> = {
      <span class="attr">source</span>  = <span class="string">"hashicorp/azurerm"</span>
      <span class="attr">version</span> = <span class="string">"4.56.0"</span>
    }
  }
}

<span class="keyword">provider</span> <span class="string">"azurerm"</span> {
  <span class="attr">features</span> {} <span class="comment">// Required for Azure provider to function</span>
  <span class="attr">subscription_id</span> = <span class="string">"your-guid-here"</span>
}</pre>
        </div>

        <h2>5. Essential CLI Commands</h2>
        <div class="grid">
            <div class="concept-card">
                <h4><code>terraform show</code></h4>
                <p>Displays the human-readable output of the current state file.</p>
            </div>
            <div class="concept-card">
                <h4><code>terraform fmt</code></h4>
                <p>Automatically rewrites files into the canonical format (alignment/spacing).</p>
            </div>
            <div class="concept-card">
                <h4><code>terraform validate</code></h4>
                <p>Checks the configuration for internal consistency and syntax errors.</p>
            </div>
            <div class="concept-card">
                <h4><code>terraform output</code></h4>
                <p>Extracts and displays values defined in <code>output.tf</code>.</p>
            </div>
        </div>

        <h2>6. Best Practices & Workflow</h2>
        <div class="concept-card">
            <h4>Recommended Deployment Order</h4>
            <ol class="list-detailed" style="margin-left: 30px;">
                <li><strong>Resource Group:</strong> The logical container for all resources.</li>
                <li><strong>Storage Account & Container:</strong> Needed for holding data and remote state.</li>
                <li><strong>Backend Configuration:</strong> Move <code>.tfstate</code> to Azure Storage for security.</li>
                <li><strong>Log Analytics:</strong> Setup monitoring early.</li>
                <li><strong>Workspace Mapping:</strong> Define log fetching and dynamic mapping logic.</li>
            </ol>
        </div>

        <div class="grid">
            <div class="concept-card">
                <h4>Naming Conventions</h4>
                <p>Follow official cloud recommendations (e.g., Microsoft Cloud Adoption Framework) for resource naming to avoid conflicts.</p>
            </div>
            <div class="concept-card">
                <h4>Remote State</h4>
                <p><strong>Crucial:</strong> Never keep <code>.tfstate</code> files on your local machine. Secure them in Remote Backends (Azure Blob Storage) to allow team collaboration and locking.</p>
            </div>
        </div>

        <div class="note">
            <strong>Pro Tip:</strong> Use <strong>Dynamic Mapping</strong> for Log Analytics to dynamically fetch logs from multiple resources without writing individual blocks for every single metric. This keeps your code DRY (Don't Repeat Yourself).
        </div>

        <section class="concept-card" style="background: #fff; border-style: dashed;">
            <h4>Official Resource Registry</h4>
            <p>For detailed attributes of every resource type, refer to the official documentation:</p>
            <a href="https://registry.terraform.io/browse/providers" target="_blank" style="color: var(--accent); font-weight: 700;">Terraform Provider Registry â†’</a>
        </section>
    </div>

</body>
</html>