<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Services Deep Dive - VENKATESAN SM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3a8a;
            --accent: #3b82f6;
            --bg-light: #f8fafc;
            --code-bg: #0f172a;
            --border: #e2e8f0;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --k8s-blue: #326ce5;
            --success: #10b981;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            color: var(--text-main);
            line-height: 1.6;
            padding: 40px 20px;
        }

        .container { max-width: 1000px; margin: 0 auto; }

        /* Header */
        .module-header {
            border-bottom: 2px solid var(--border);
            margin-bottom: 40px;
            padding-bottom: 20px;
        }
        .breadcrumb { font-size: 0.85rem; color: var(--k8s-blue); font-weight: 600; text-transform: uppercase; margin-bottom: 10px; }
        h1 { font-size: 2.5rem; color: var(--primary); font-weight: 800; }

        h2 { font-size: 1.8rem; color: var(--primary); margin: 50px 0 20px; border-left: 5px solid var(--k8s-blue); padding-left: 15px; }
        h3 { font-size: 1.3rem; color: var(--primary); margin: 30px 0 15px; font-weight: 600; }

        /* Technical Blocks */
        .technical-block {
            background: var(--code-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .block-label { color: #94a3b8; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; margin-bottom: 15px; display: block; }
        
        pre {
            font-family: 'Fira Code', monospace;
            font-size: 0.88rem;
            color: #e2e8f0;
            overflow-x: auto;
        }
        .yaml-key { color: #f472b6; font-weight: 700; }
        .yaml-val { color: #fbbf24; }
        .comment { color: #64748b; font-style: italic; }
        .cmd { color: #38bdf8; }

        /* Cards & UI */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .concept-card {
            background: var(--bg-light);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .concept-card h4 { color: var(--primary); margin-bottom: 10px; }

        .note {
            background: #eff6ff;
            border-left: 4px solid var(--k8s-blue);
            padding: 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            margin: 30px 0;
        }

        table { width: 100%; border-collapse: collapse; margin: 20px 0; border-radius: 8px; overflow: hidden; font-size: 0.9rem; }
        th { background: var(--primary); color: white; text-align: left; padding: 12px; }
        td { padding: 12px; border-bottom: 1px solid var(--border); }
        tr:nth-child(even) { background: var(--bg-light); }
    </style>
</head>
<body>

    <div class="container">
        
        <header class="module-header">
            <div class="breadcrumb">Kubernetes Networking</div>
            <h1>Services (SVC) Mastery</h1>
            <p style="margin-top: 10px; color: var(--text-muted);">Decoupling Pods from IPs for reliable internal and external communication.</p>
        </header>

        <h2>1. Why we use Services</h2>
        <p>Pods are ephemeralâ€”they die and get replaced with new IP addresses. A <strong>Service</strong> acts as a static entry point (Virtual IP) that directs traffic to Pods using <strong>Labels and Selectors</strong>. This ensures that even if Pods are replaced, the network endpoint remains unchanged.</p>

        

        <h2>2. Service Type Comparison</h2>
        <div class="grid">
            <div class="concept-card">
                <h4>ClusterIP (Default)</h4>
                <p>Allocates a virtual IP reachable only within the cluster. Used for internal microservice-to-microservice communication.</p>
            </div>
            <div class="concept-card">
                <h4>NodePort</h4>
                <p>Opens a specific port (30000-32767) on all Worker Nodes. Allows external traffic to reach the service via <code>NodeIP:NodePort</code>.</p>
            </div>
            <div class="concept-card">
                <h4>LoadBalancer</h4>
                <p>The standard for cloud environments. It creates an external cloud-provider load balancer (e.g., Azure LB) to route traffic from the internet.</p>
            </div>
        </div>

        <h2>3. Technical Syntax & Examples</h2>

        <h3>ClusterIP Syntax</h3>
        <div class="technical-block">
            <span class="block-label">Internal Service Definition</span>
            <pre>
<span class="yaml-key">apiVersion:</span> <span class="yaml-val">v1</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">Service</span>
<span class="yaml-key">metadata:</span>
  <span class="yaml-key">name:</span> <span class="yaml-val">backend-svc</span>
<span class="yaml-key">spec:</span>
  <span class="yaml-key">type:</span> <span class="yaml-val">ClusterIP</span>
  <span class="yaml-key">selector:</span>
    <span class="yaml-key">app:</span> <span class="yaml-val">backend</span> <span class="comment"># Routes to Pods with label app=backend</span>
  <span class="yaml-key">ports:</span>
    <span class="yaml-key">- port:</span> <span class="yaml-val">80</span> <span class="comment"># Port reachable on Service IP</span>
      <span class="yaml-key">targetPort:</span> <span class="yaml-val">8080</span> <span class="comment"># Port on the Container</span></pre>
        </div>

        <h3>NodePort Syntax</h3>
        <div class="technical-block">
            <span class="block-label">External Exposure via Node IP</span>
            <pre>
<span class="yaml-key">apiVersion:</span> <span class="yaml-val">v1</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">Service</span>
<span class="yaml-key">metadata:</span>
  <span class="yaml-key">name:</span> <span class="yaml-val">frontend-nodeport</span>
<span class="yaml-key">spec:</span>
  <span class="yaml-key">type:</span> <span class="yaml-val">NodePort</span>
  <span class="yaml-key">selector:</span>
    <span class="yaml-key">app:</span> <span class="yaml-val">frontend</span>
  <span class="yaml-key">ports:</span>
    <span class="yaml-key">- port:</span> <span class="yaml-val">80</span>
      <span class="yaml-key">targetPort:</span> <span class="yaml-val">80</span>
      <span class="yaml-key">nodePort:</span> <span class="yaml-val">32001</span> <span class="comment"># Must be 30000-32767</span></pre>
        </div>

        <h3>LoadBalancer Syntax</h3>
        
        <div class="technical-block">
            <span class="block-label">Cloud-Managed Load Balancing</span>
            <pre>
<span class="yaml-key">apiVersion:</span> <span class="yaml-val">v1</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">Service</span>
<span class="yaml-key">metadata:</span>
  <span class="yaml-key">name:</span> <span class="yaml-val">prod-lb-svc</span>
<span class="yaml-key">spec:</span>
  <span class="yaml-key">type:</span> <span class="yaml-val">LoadBalancer</span>
  <span class="yaml-key">selector:</span>
    <span class="yaml-key">app:</span> <span class="yaml-val">web-app</span>
  <span class="yaml-key">ports:</span>
    <span class="yaml-key">- port:</span> <span class="yaml-val">80</span>
      <span class="yaml-key">targetPort:</span> <span class="yaml-val">80</span></pre>
        </div>

        <h2>4. Port Reference Guide</h2>
        <table>
            <thead>
                <tr>
                    <th>Port Name</th>
                    <th>Where it lives</th>
                    <th>Function</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Port</strong></td>
                    <td>Service IP</td>
                    <td>Used for internal cluster communication to the service.</td>
                </tr>
                <tr>
                    <td><strong>TargetPort</strong></td>
                    <td>Container IP</td>
                    <td>The port defined in the application code inside the Pod.</td>
                </tr>
                <tr>
                    <td><strong>NodePort</strong></td>
                    <td>Worker Node IP</td>
                    <td>The port used to access the service from outside the cluster.</td>
                </tr>
            </tbody>
        </table>

        <h2>5. Service Discovery (DNS)</h2>
        <p>Kubernetes runs an internal DNS service (CoreDNS). Every service gets a DNS record following this format:</p>
        <div class="note">
            <strong>Internal DNS Name:</strong> <code>service-name.namespace.svc.cluster.local</code><br>
            <strong>Example:</strong> A pod in the 'test' namespace can reach 'db-svc' in the 'prod' namespace using <code>db-svc.prod.svc.cluster.local</code>.
        </div>

        <h2>6. Troubleshooting & Diagnostics</h2>
        <div class="technical-block">
            <span class="block-label">Essential Kubectl Commands</span>
            <pre>
<span class="comment"># List all services and their IPs</span>
<span class="cmd">kubectl get svc</span>

<span class="comment"># Check if Service has found Pods (Endpoints list)</span>
<span class="cmd">kubectl get endpoints &lt;service-name&gt;</span>

<span class="comment"># View detailed config and event history</span>
<span class="cmd">kubectl describe svc &lt;service-name&gt;</span></pre>
        </div>

        <div class="note" style="border-left-color: var(--success); background: #f0fdf4;">
            <strong>Pro Tip:</strong> If your Service is running but you get a connection timeout, verify that your <strong>selector</strong> labels in the Service match the <strong>labels</strong> in your Deployment metadata exactly.
        </div>
    </div>

</body>
</html>